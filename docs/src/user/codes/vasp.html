<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<title>VASP</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7952 2016-07-26 18:15:59Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

.subscript {
  vertical-align: sub;
  font-size: smaller }

.superscript {
  vertical-align: super;
  font-size: smaller }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left, table.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right, table.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

table.align-center {
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

.align-top    {
  vertical-align: top }

.align-middle {
  vertical-align: middle }

.align-bottom {
  vertical-align: bottom }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="vasp">
<h1 class="title">VASP</h1>

<div class="section" id="configuration">
<h1>Configuration</h1>
<p>List of settings.</p>
<p>setting vasp_cmd (also this can be set as an environment variable.</p>
<p>VASP defaults, PBEsol etc.</p>
</div>
<div class="section" id="list-of-vasp-workflows">
<h1>List of VASP workflows</h1>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="40%" />
<col width="20%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Maker</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><a class="reference internal" href="#static">Static</a></td>
<td>job</td>
<td><p class="first"><a href="#id1"><span class="problematic" id="id2">:obj:`.StaticMaker`</span></a></p>
<div class="last system-message" id="id1">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">/Users/alex/dev/src/atomate2/docs/src/user/codes/vasp.rst</tt>, line 22); <em><a href="#id2">backlink</a></em></p>
Unknown interpreted text role &quot;obj&quot;.</div>
</td>
</tr>
<tr><td><a class="reference internal" href="#relax">Relax</a></td>
<td>job</td>
<td><p class="first"><a href="#id3"><span class="problematic" id="id4">:obj:`.RelaxMaker`</span></a></p>
<div class="last system-message" id="id3">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">/Users/alex/dev/src/atomate2/docs/src/user/codes/vasp.rst</tt>, line 22); <em><a href="#id4">backlink</a></em></p>
Unknown interpreted text role &quot;obj&quot;.</div>
</td>
</tr>
<tr><td><a class="reference internal" href="#dielectric">Dielectric</a></td>
<td>job</td>
<td><p class="first"><a href="#id5"><span class="problematic" id="id6">:obj:`.DielectricMaker`</span></a></p>
<div class="last system-message" id="id5">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">/Users/alex/dev/src/atomate2/docs/src/user/codes/vasp.rst</tt>, line 22); <em><a href="#id6">backlink</a></em></p>
Unknown interpreted text role &quot;obj&quot;.</div>
</td>
</tr>
<tr><td><a class="reference internal" href="#hse06-static">HSE06 Static</a></td>
<td>job</td>
<td><p class="first"><a href="#id7"><span class="problematic" id="id8">:obj:`.HSEStaticMaker`</span></a></p>
<div class="last system-message" id="id7">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">/Users/alex/dev/src/atomate2/docs/src/user/codes/vasp.rst</tt>, line 22); <em><a href="#id8">backlink</a></em></p>
Unknown interpreted text role &quot;obj&quot;.</div>
</td>
</tr>
<tr><td><a class="reference internal" href="#hse06-relax">HSE06 Relax</a></td>
<td>job</td>
<td><p class="first"><a href="#id9"><span class="problematic" id="id10">:obj:`.HSERelaxMaker`</span></a></p>
<div class="last system-message" id="id9">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">/Users/alex/dev/src/atomate2/docs/src/user/codes/vasp.rst</tt>, line 22); <em><a href="#id10">backlink</a></em></p>
Unknown interpreted text role &quot;obj&quot;.</div>
</td>
</tr>
<tr><td><a class="reference internal" href="#double-relax">Double Relax</a></td>
<td>flow</td>
<td><p class="first"><a href="#id11"><span class="problematic" id="id12">:obj:`.DoubleRelaxMaker`</span></a></p>
<div class="last system-message" id="id11">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">/Users/alex/dev/src/atomate2/docs/src/user/codes/vasp.rst</tt>, line 22); <em><a href="#id12">backlink</a></em></p>
Unknown interpreted text role &quot;obj&quot;.</div>
</td>
</tr>
<tr><td><a class="reference internal" href="#band-structure">Band Structure</a></td>
<td>flow</td>
<td><p class="first"><a href="#id13"><span class="problematic" id="id14">:obj:`.BandStructureMaker`</span></a></p>
<div class="last system-message" id="id13">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">/Users/alex/dev/src/atomate2/docs/src/user/codes/vasp.rst</tt>, line 22); <em><a href="#id14">backlink</a></em></p>
Unknown interpreted text role &quot;obj&quot;.</div>
</td>
</tr>
<tr><td><a class="reference internal" href="#hse06-band-structure">HSE06 Band Structure</a></td>
<td>flow</td>
<td><p class="first"><a href="#id15"><span class="problematic" id="id16">:obj:`.HSEBandStructureMaker`</span></a></p>
<div class="last system-message" id="id15">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">/Users/alex/dev/src/atomate2/docs/src/user/codes/vasp.rst</tt>, line 22); <em><a href="#id16">backlink</a></em></p>
Unknown interpreted text role &quot;obj&quot;.</div>
</td>
</tr>
<tr><td><a class="reference internal" href="#elastic-constant">Elastic Constant</a></td>
<td>flow</td>
<td><p class="first"><a href="#id17"><span class="problematic" id="id18">:obj:`.ElasticMaker`</span></a></p>
<div class="last system-message" id="id17">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">/Users/alex/dev/src/atomate2/docs/src/user/codes/vasp.rst</tt>, line 22); <em><a href="#id18">backlink</a></em></p>
Unknown interpreted text role &quot;obj&quot;.</div>
</td>
</tr>
</tbody>
</table>
<div class="section" id="static">
<h2>Static</h2>
<p>A static VASP calculation (i.e., no relaxation).</p>
</div>
<div class="section" id="relax">
<h2>Relax</h2>
<p>A VASP relaxation calculation. Full structural relaxation is performed.</p>
</div>
<div class="section" id="dielectric">
<h2>Dielectric</h2>
<p>A VASP calculation to obtain dielectric properties. The static and high-frequency
dielectric constants are obtained using density functional perturbation theory.</p>
</div>
<div class="section" id="hse06-static">
<h2>HSE06 Static</h2>
<p>A static VASP calculation (i.e., no relaxation) using the HSE06 exchange correlation
functional.</p>
</div>
<div class="section" id="hse06-relax">
<h2>HSE06 Relax</h2>
<p>A VASP relaxation calculation using the HSE06 functional. Full structural relaxation
is performed.</p>
</div>
<div class="section" id="double-relax">
<h2>Double Relax</h2>
<p>Perform two back-to-back relaxations. This can often help avoid errors arising from
Pulay stress.</p>
</div>
<div class="section" id="band-structure">
<h2>Band Structure</h2>
<p>Calculate the electronic band structure. This flow consists of three calculations:</p>
<ol class="arabic simple">
<li>A static calculation to generate the charge density.</li>
<li>A non-self-consistent field calculation on a dense uniform mesh.</li>
<li>A non-self-consistent field calculation on the high-symmetry k-point path to generate
the line mode band structure.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Band structure objects are automatically stored in the <tt class="docutils literal">data</tt> store due to
limitations on mongoDB collection sizes.</p>
</div>
</div>
<div class="section" id="hse06-band-structure">
<h2>HSE06 Band Structure</h2>
<p>Calculate the electronic band structure using HSE06. This flow consists of three
calculations:</p>
<ol class="arabic simple">
<li>A HSE06 static calculation to generate the charge density.</li>
<li>A HSE06 calculation on a dense uniform mesh.</li>
<li>A HSE06 calculation on the high-symmetry k-point path using zero weighted k-points.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Band structure objects are automatically stored in the <tt class="docutils literal">data</tt> store due to
limitations on mongoDB collection sizes.</p>
</div>
</div>
<div class="section" id="elastic-constant">
<h2>Elastic Constant</h2>
<p>Information on elastic constants.</p>
</div>
</div>
<div class="section" id="modifying-input-sets">
<h1>Modifying input sets</h1>
<p>The inputs for a calculation can be modified in several ways. Every VASP job
takes a <a href="#id19"><span class="problematic" id="id20">:obj:`.VaspInputSetGenerator`</span></a> as an argument (<tt class="docutils literal">input_set_generator</tt>). One
option is to specify an alternative input set generator:</p>
<div class="system-message" id="id19">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">/Users/alex/dev/src/atomate2/docs/src/user/codes/vasp.rst</tt>, line 94); <em><a href="#id20">backlink</a></em></p>
Unknown interpreted text role &quot;obj&quot;.</div>
<pre class="code python literal-block">
<span class="keyword namespace">from</span> <span class="name namespace">atomate2.vasp.sets.core</span> <span class="keyword namespace">import</span> <span class="name">StaticSetGenerator</span>
<span class="keyword namespace">from</span> <span class="name namespace">atomate2.vasp.jobs.core</span> <span class="keyword namespace">import</span> <span class="name">StaticMaker</span>

<span class="comment single"># create a custom input generator set with a larger ENCUT</span>
<span class="name">my_custom_set</span> <span class="operator">=</span> <span class="name">StaticSetGenerator</span><span class="punctuation">(</span><span class="name">user_incar_settings</span><span class="operator">=</span><span class="punctuation">{</span><span class="literal string double">&quot;ENCUT&quot;</span><span class="punctuation">:</span> <span class="literal number integer">800</span><span class="punctuation">})</span>

<span class="comment single"># initialise the static maker to use the custom input set generator</span>
<span class="name">static_maker</span> <span class="operator">=</span> <span class="name">StaticMaker</span><span class="punctuation">(</span><span class="name">input_set_generator</span><span class="operator">=</span><span class="name">my_custom_set</span><span class="punctuation">)</span>

<span class="comment single"># create a job using the customised maker</span>
<span class="name">static_job</span> <span class="operator">=</span> <span class="name">static_maker</span><span class="operator">.</span><span class="name">make</span><span class="punctuation">(</span><span class="name">structure</span><span class="punctuation">)</span>
</pre>
<p>The second approach is to edit the job after it has been made. All VASP jobs have a
<tt class="docutils literal">maker</tt> attribute containing a <em>copy</em> of the <tt class="docutils literal">Maker</tt> that made them. Updating
the <tt class="docutils literal">input_set_generator</tt> attribute this maker will update the input set that gets
written:</p>
<pre class="code python literal-block">
<span class="name">static_job</span><span class="operator">.</span><span class="name">maker</span><span class="operator">.</span><span class="name">input_set_generator</span><span class="operator">.</span><span class="name">user_incar_settings</span><span class="punctuation">[</span><span class="literal string double">&quot;LOPTICS&quot;</span><span class="punctuation">]</span> <span class="operator">=</span> <span class="keyword constant">True</span>
</pre>
<p>Finally, sometimes you have workflow containing many VASP jobs. In this case it can be
tedious to update the input sets for each job individually. Atomate2 provides helper
functions called &quot;powerups&quot; that can apply settings updates to all VASP jobs in a flow.
These powerups also contain filters for the name of the job and the maker used to
generate them.</p>
<pre class="code literal-block">
from atomate2.poo
</pre>
</div>
<div class="section" id="chaining-workflows">
<h1>Chaining workflows</h1>
<p>All VASP workflows are constructed using the <tt class="docutils literal">Maker.make()</tt> function. The arguments
for this function always include:</p>
<ul class="simple">
<li><tt class="docutils literal">structure</tt>: A pymatgen structure.</li>
<li><tt class="docutils literal">prev_vasp_dir</tt>: A previous VASP directory to copy output files from.</li>
</ul>
<p>There are two options when chaining workflows:</p>
<ol class="arabic simple">
<li>Use only the structure from the previous calculation. This can be achieved by only
setting the <tt class="docutils literal">structure</tt> argument.</li>
<li>Use the structure and additional outputs from a previous calculation. By default,
these outputs include INCAR settings, the band gap (used to automatically
set KSPACING), and the magnetic moments. Some workflows will also use other outputs.
For example, the <a class="reference internal" href="#band-structure">Band Structure</a> workflow will copy the CHGCAR file (charge
density) from the previous calculation. This can be achieve by setting both the
<tt class="docutils literal">structure</tt> and <tt class="docutils literal">prev_vasp_dir</tt> arguments.</li>
</ol>
<p>These two examples are illustrated in the code below, where we chain a relaxation
calculation and a static calculation.</p>
<pre class="code python literal-block">
<span class="keyword namespace">from</span> <span class="name namespace">jobflow</span> <span class="keyword namespace">import</span> <span class="name">Flow</span>
<span class="keyword namespace">from</span> <span class="name namespace">atomate2.vasp.jobs.core</span> <span class="keyword namespace">import</span> <span class="name">RelaxMaker</span><span class="punctuation">,</span> <span class="name">StaticMaker</span>
<span class="keyword namespace">from</span> <span class="name namespace">pymatgen.core.structure</span> <span class="keyword namespace">import</span> <span class="name">Structure</span>

<span class="name">si</span> <span class="operator">=</span> <span class="name">Structure</span><span class="operator">.</span><span class="name">from_file</span><span class="punctuation">(</span><span class="literal string double">&quot;Si.cif&quot;</span><span class="punctuation">)</span>

<span class="comment single"># create a relax job</span>
<span class="name">relax_job</span> <span class="operator">=</span> <span class="name">RelaxMaker</span><span class="punctuation">()</span><span class="operator">.</span><span class="name">make</span><span class="punctuation">(</span><span class="name">structure</span><span class="operator">=</span><span class="name">si</span><span class="punctuation">)</span>

<span class="comment single"># create a static job that will use only the structure from the relaxation</span>
<span class="name">static_job</span> <span class="operator">=</span> <span class="name">StaticMaker</span><span class="punctuation">()</span><span class="operator">.</span><span class="name">make</span><span class="punctuation">(</span>
    <span class="name">structure</span><span class="operator">=</span><span class="name">relax_job</span><span class="operator">.</span><span class="name">output</span><span class="operator">.</span><span class="name">structure</span>
<span class="punctuation">)</span>

<span class="comment single"># create a static job that will use additional outputs from the relaxation</span>
<span class="name">static_job</span> <span class="operator">=</span> <span class="name">StaticMaker</span><span class="punctuation">()</span><span class="operator">.</span><span class="name">make</span><span class="punctuation">(</span>
    <span class="name">structure</span><span class="operator">=</span><span class="name">relax_job</span><span class="operator">.</span><span class="name">output</span><span class="operator">.</span><span class="name">structure</span><span class="punctuation">,</span>
    <span class="name">prev_vasp_dir</span><span class="operator">=</span><span class="name">relax_job</span><span class="operator">.</span><span class="name">output</span><span class="operator">.</span><span class="name">dir_name</span>
<span class="punctuation">)</span>

<span class="comment single"># create a flow including the two jobs and set the output to be that of the static</span>
<span class="name">my_flow</span> <span class="operator">=</span> <span class="name">Flow</span><span class="punctuation">([</span><span class="name">relax_job</span><span class="punctuation">,</span> <span class="name">static_job</span><span class="punctuation">],</span> <span class="name">output</span><span class="operator">=</span><span class="name">static_job</span><span class="operator">.</span><span class="name">output</span><span class="punctuation">)</span>
</pre>
</div>
</div>
</body>
</html>
